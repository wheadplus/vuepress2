# 正则

正则就是计算机语言中一种匹配规则。通过这些规则可以过滤、搜索资源。

创建正则

```js
//构造函数
var reg=new RegExp('<%[^%>]+%>','g');
//字面量 
var reg=/<%[^%>]%>/g;
```

其中，`/???/`中间代表匹配规则 `g` 代表修饰符

- g: global 全文搜索，不添加的话搜索到第一个结果停止搜索
- i: ingore case 忽略大小写，默认大小写敏感
- m: multiple lines 多行搜索

## 不用就忘了的概念

### 元字符

就是那些特殊符号，回车符。空白符号。常用的：

```js
\r	回车符
\0  空字符
\n	换行符
```

特殊的，平时也不用。用到再百度就OK。

### 字符类

`[]`

```
[abcd] //代表匹配abcd中的其中一个，
[你要的字符]
```

### 取反

`^`取反

```js
[^abcd]  //代表匹配1个不是a或b或c的字符
```

### 范围

`-`范围

```js
//0-9中的任意一个
var reg1 = /[0123456789]/
//0-9中的任意一个, - 简洁写法
var reg2 = /[0-9]/
//是a-z中的任意一个
var reg3 = /[a-z]/
//大写字母、小写字母、数字中的任意一个
var reg3 = /[a-zA-Z0-9]/
```

### 预定义类

就是预先定义这些代表那些符号，这样写起来就方便。

| 字符 |      等价类       |               含义               |
| :--: | :---------------: | :------------------------------: |
|  .   |     `[^\r\n]`     | 除了回车符和换行符之外的所有字符 |
|  \d  |      `[0-9]`      |             数字字符             |
|  \D  |     `[^0-9]`      |            非数字字符            |
|  \s  | `[\t\n\x0B\f\r]`  |              空白符              |
|  \S  | `[^\t\n\x0B\f\r]` |             非空白符             |
|  \w  |  `[a-zA-Z_0-9]`   |    单词字符，字母、数字下划线    |
|  \W  |  `[^a-zA-Z_0-9]`  |            非单词字符            |

### 边界



| 字符 |    含义    |
| :--: | :--------: |
|  ^   | 以xxx开头  |
|  $   | 以xxx结尾  |
|  \b  |  单词边界  |
|  \B  | 非单词边界 |



```js
var str = 'hello1 world hello2 123456 \t \r 哈喽 \n  hello3'
//  其中 \d 数字字符 也就是 0-9
str.match(/hello\d/g)   // ["hello1", "hello2", "hello3"] 匹配hello+数字
str.match(/^hello\d/g)  // ["hello1"] 匹配hello开头+数字

str.match(/hello\d$/g)   // ["hello3"] 匹配数字结尾

str.match(/\bhello\d/g) //["hello1", "hello2", "hello3"] 匹配单词开头hello+数字
```



### 数量词

| 字符  |              含义              |
| :---: | :----------------------------: |
|   ?   | 出现零次或一次（最多出现一次） |
|   +   | 出现一次或多次（至少出现一次） |
|   *   |    出现零次或多次（任意次）    |
|  {n}  |            出现n次             |
| {n,m} |           出现n到m次           |
| {n,}  |          至少出现n次           |

```js
var str = '110'
str.match(/\d{3}/g)  //数字出现3此
var str = ‘http://baidu.com’ 
// . 除了回车符和换行符之外的所有字符
str.match(/https?:\/\/.+/) //s出现0次或1次 其他符号出现1次或多次
```



### 贪婪模式和非贪婪模式

默认时贪婪模式，也就是尽可能多的匹配，如需要非贪婪模式，只要在量词后面加上`?`就开启了

```
\d表示匹配数字0-9，{3,5}表示3到5次，贪婪模式下5次
'123456789'.match(/\d{3,5}/g); //["12345", "6789"] 
\d表示匹配数字0-9，{3,5}表示3到5次，非贪婪模式下3次
'123456789'.match(/\d{3,5}?/g); //["123", "456", "789"]
// {3,5}? ?非贪婪
```

### 或

```js
var str = '叠词可可爱爱，你好恶心心'
str.match(/可|爱/g) //["可", "可", "爱", "爱"]
```

## 常用正则

判断用户输入的是不是合法的用户名（长度6-20个字符，只能包括字母、数字、下划线）。

```js
var reg = /\w{6,20}/ 
```

去除字符串两边的空白字符。

```js
function trim(str){
    //return str.replace(/^\s*|\s*$/g,"")
    return str.replace(/(^\s*)|(\s*$)/g, ""); //匹配空白开头或空白结尾 * 0-n次 
}
trim("   xxx aa bbb  ")  
```

## 总结

正则不用就很容易忘记，也没必要记住。记下来，用到的时候翻一翻，又想起了。